<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fulltv ‚Ä¢ Canais ao Vivo</title>
  <!-- Favicon SVG inline -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%236d1418'/%3E%3Crect x='14' y='14' width='36' height='10' fill='%23ffffff'/%3E%3Crect x='14' y='27' width='20' height='10' fill='%23ffffff'/%3E%3Crect x='14' y='14' width='10' height='36' fill='%23ffffff'/%3E%3C/svg%3E" />
  <meta name="theme-color" content="#6d1418" />
  <!-- Tailwind CDN (sem build) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: radial-gradient(80% 120% at 50% 0%, #7c1a1f 0%, #4b0d10 60%, #250608 100%);
    }
    .thin-scroll::-webkit-scrollbar { width: 8px; }
    .thin-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,.15); border-radius: 8px; }
    [hidden]{display:none!important;}
  </style>
</head>
<body class="min-h-screen text-white">
  <!-- Topbar -->
  <header class="flex h-16 items-center justify-between border-b border-white/10 bg-gradient-to-r from-[#4b0d10] via-[#6d1418] to-[#4b0d10] px-4">
    <div class="flex items-center gap-3">
      <div class="flex h-8 w-8 items-center justify-center rounded-md bg-white text-[#6d1418] font-black">F</div>
      <span class="text-white/90 font-semibold">Fulltv</span>
    </div>
    <nav class="hidden md:flex items-center gap-6 text-sm">
      <!-- J√° deixo as abas no HTML para evitar "flicker" -->
      <button class="uppercase tracking-wide text-white font-semibold">Todos os canais</button>
      <button class="uppercase tracking-wide text-white/60 hover:text-white/90">Abertos</button>
      <button class="uppercase tracking-wide text-white/60 hover:text-white/90">Esportes</button>
      <button class="uppercase tracking-wide text-white/60 hover:text-white/90">Variedades</button>
      <button class="uppercase tracking-wide text-white/60 hover:text-white/90">Kids</button>
    </nav>
    <div class="flex items-center gap-4 text-white/80">
      <button title="Pesquisar" class="hover:text-white">üîé</button>
      <button title="Notifica√ß√µes" class="hover:text-white">üîî</button>
      <button title="Perfil" class="hover:text-white">üë§</button>
      <div id="clock" class="ml-2 text-white/90 tabular-nums">--:--</div>
    </div>
  </header>

  <!-- GRID -->
  <main class="mx-auto grid max-w-7xl grid-cols-1 gap-4 p-4 md:grid-cols-[320px_1fr]">
    <!-- Sidebar canais -->
    <aside class="flex w-[320px] shrink-0 flex-col gap-2 p-1">
      <div class="mb-1 text-xs uppercase tracking-wide text-white/60">Lista de Canais</div>
      <div id="channelList" class="thin-scroll flex max-h-[60vh] flex-col gap-2 overflow-auto pr-1"></div>
      <div class="mt-3 rounded-lg border border-white/10 p-3 text-[11px] text-white/60">
        Pressione <span class="rounded bg-white/10 px-1">‚Üë/‚Üì</span> para navegar e <span class="rounded bg-white/10 px-1">Enter</span> para assistir
      </div>
    </aside>

    <!-- Player -->
    <section id="playerContainer" class="relative aspect-video w-full overflow-hidden rounded-2xl border border-white/10 bg-black shadow-2xl">
      <iframe id="player" src="about:blank" title="Canal atual" class="absolute inset-0 h-full w-full border-0" allowfullscreen referrerpolicy="no-referrer"></iframe>
      <!-- LIVE -->
      <div class="pointer-events-none absolute left-4 top-4 flex items-center gap-2 rounded-full bg-red-600/90 px-2.5 py-1 text-xs font-bold text-white shadow">
        <span class="inline-block h-2 w-2 animate-pulse rounded-full bg-white"></span> AO VIVO
      </div>
      <!-- A√ß√µes -->
      <div class="absolute right-4 top-4 flex items-center gap-2 z-10">
        <button id="btnFullscreen" class="rounded-full bg-black/40 px-2 py-1 text-white/90 backdrop-blur hover:bg-black/60" title="Tela cheia">‚§¢</button>
      </div>
      <!-- Barra de informa√ß√µes -->
      <div id="infoBar" class="pointer-events-none absolute inset-x-0 bottom-0 flex items-end p-4">
        <div class="w-full rounded-2xl bg-gradient-to-r from-black/80 via-black/60 to-transparent p-4 text-white shadow-2xl">
          <div class="text-sm uppercase tracking-wide text-white/70">Canal</div>
          <div class="flex items-baseline justify-between">
            <h3 id="infoTitle" class="truncate text-2xl font-bold md:text-3xl">‚Äî</h3>
            <div id="infoSubtitle" class="hidden pl-4 text-right text-sm text-white/70 md:block">‚Äî</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="mx-auto max-w-7xl px-4 pb-6 text-center text-xs text-white/60">Todos os direitos reservados ao Fulltv ¬© 2025</footer>

  <!-- App JS (vanilla) -->
  <script>
    // ====== Lista de Canais ======
    const CHANNELS = [
      { id: 1, number: 1, name: "Globo SP", category: "Abertos", quality: "HD", logoUrl: "https://reidoscanais.life/img/tvglobo.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=globosp-globosaopaulo" },
      { id: 2, number: 2, name: "Globo RJ", category: "Abertos", quality: "HD", logoUrl: "https://reidoscanais.life/img/tvglobo.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=globorj-globorio" },
      { id: 3, number: 3, name: "SBT",      category: "Abertos", quality: "HD", logoUrl: "https://reidoscanais.life/img/sbt.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=sbt" },
      { id: 4, number: 4, name: "BAND",     category: "Abertos", quality: "HD", logoUrl: "https://reidoscanais.life/img/band.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=band" },
      { id: 5, number: 5, name: "Record",   category: "Abertos", quality: "HD", logoUrl: "https://reidoscanais.life/img/record.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=record" },

      { id: 6, number: 6, name: "1 - Lounge",              category: "Destaque", quality: "HD", logoUrl: "https://i.ibb.co/N6TQfNbf/Estrela-da-Casa-2-Logo-1.jpg", live: true, streamUrl: "https://reidoscanais.life/embed/?id=estreladacasa" },
      { id: 7, number: 7, name: "2- Dormitorio",           category: "Destaque", quality: "HD", logoUrl: "https://i.ibb.co/N6TQfNbf/Estrela-da-Casa-2-Logo-1.jpg", live: true, streamUrl: "https://reidoscanais.life/embed/?id=estreladacasa2" },
      { id: 8, number: 8, name: "3- Refeitorio",           category: "Destaque", quality: "HD", logoUrl: "https://i.ibb.co/N6TQfNbf/Estrela-da-Casa-2-Logo-1.jpg", live: true, streamUrl: "https://reidoscanais.life/embed/?id=estreladacasa3" },
      { id: 9, number: 9, name: "4 - Sala de Composi√ß√£o",  category: "Destaque", quality: "HD", logoUrl: "https://i.ibb.co/N6TQfNbf/Estrela-da-Casa-2-Logo-1.jpg", live: true, streamUrl: "https://reidoscanais.life/embed/?id=estreladacasa4" },
      { id: 10, number: 10, name: "5 - Espa√ßo Corpo",      category: "Destaque", quality: "HD", logoUrl: "https://i.ibb.co/N6TQfNbf/Estrela-da-Casa-2-Logo-1.jpg", live: true, streamUrl: "https://reidoscanais.life/embed/?id=estreladacasa5" },
      { id: 11, number: 11, name: "6 - Deck/√Årea de Treino", category: "Destaque", quality: "HD", logoUrl: "https://i.ibb.co/N6TQfNbf/Estrela-da-Casa-2-Logo-1.jpg", live: true, streamUrl: "https://reidoscanais.life/embed/?id=estreladacasa6" },

      { id: 12, number: 12, name: "ESPN",    category: "Esportes", quality: "HD", logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/ESPN_wordmark.svg/512px-ESPN_wordmark.svg.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=espn" },
      { id: 13, number: 13, name: "ESPN 2",  category: "Esportes", quality: "HD", logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/ESPN_wordmark.svg/512px-ESPN_wordmark.svg.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=espn2" },
      { id: 14, number: 14, name: "ESPN 3",  category: "Esportes", quality: "HD", logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/ESPN_wordmark.svg/512px-ESPN_wordmark.svg.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=espn3" },
      { id: 15, number: 15, name: "ESPN 4",  category: "Esportes", quality: "HD", logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/ESPN_wordmark.svg/512px-ESPN_wordmark.svg.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=espn4" },
      { id: 16, number: 16, name: "ESPN 5",  category: "Esportes", quality: "HD", logoUrl: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/ESPN_wordmark.svg/512px-ESPN_wordmark.svg.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=espn5" },
      { id: 17, number: 17, name: "Sportv",  category: "Esportes", quality: "HD", logoUrl: "https://i.imgur.com/eHJ8Vm3.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=sportv" },
      { id: 18, number: 18, name: "Sportv 2",category: "Esportes", quality: "HD", logoUrl: "https://i.imgur.com/eHJ8Vm3.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=sportv2" },
      { id: 19, number: 19, name: "Sportv 3",category: "Esportes", quality: "HD", logoUrl: "https://i.imgur.com/eHJ8Vm3.png", live: true, streamUrl: "https://reidoscanais.life/embed/?id=sportv3" },
    ];

    // ====== Estado e mapeamentos de abas ======
    let selectedIndex = 0;      // √≠ndice dentro da lista filtrada
    let activeCategory = 'ALL'; // inicia em "Todos os canais"

    const TAB_TO_CATEGORY = {
      'TODOS OS CANAIS': 'ALL',
      'ABERTOS': 'Abertos',
      'ESPORTES': 'Esportes',
      'VARIEDADES': 'Variedades',
      'KIDS': 'Kids',
      // compatibilidade (se algu√©m mudar o HTML manualmente)
      'TV': 'Abertos',
      'EXPLORAR': 'ALL',
      'FILMES': 'Esportes',
      'S√âRIES': 'Variedades',
      'SERIES': 'Variedades',
      'DESTAQUES': 'Destaque'
    };

    const normalize = (s) => (s || '').normalize('NFD').replace(/\p{Diacritic}/gu, '').toUpperCase().trim();

    function getVisibleChannels() {
      if (activeCategory === 'ALL') return CHANNELS;
      return CHANNELS.filter(ch => normalize(ch.category) === normalize(activeCategory));
    }

    // ====== Render da Sidebar (filtrado pela aba) ======
    function renderList() {
      const listEl = document.getElementById('channelList');
      if (!listEl) return;
      listEl.innerHTML = '';

      const visible = getVisibleChannels();

      if (!visible.length) {
        const empty = document.createElement('div');
        empty.className = 'text-sm text-white/60';
        empty.textContent = 'Nenhum canal nesta categoria.';
        listEl.appendChild(empty);
        return;
      }

      visible.forEach((ch, idx) => {
        const btn = document.createElement('button');
        btn.className = `group relative flex w-full items-center gap-3 rounded-xl border border-white/5 px-3 py-2 text-left transition-all ${idx === selectedIndex ? 'bg-white/10 ring-2 ring-rose-400/50' : 'hover:bg-white/5'}`;

        const logoWrap = document.createElement('div');
        logoWrap.className = 'flex h-8 w-8 items-center justify-center rounded-md bg-black/30 text-lg overflow-hidden';
        const img = document.createElement('img');
        img.src = ch.logoUrl; img.alt = ch.name; img.className = 'h-6 w-6 object-contain';
        logoWrap.appendChild(img);

        const textWrap = document.createElement('div');
        textWrap.className = 'flex min-w-0 flex-col';

        const titleRow = document.createElement('div');
        titleRow.className = 'flex items-center text-[13px] text-white/90';
        const num = document.createElement('span'); num.className = 'mr-2 text-white/70 w-6'; num.textContent = ch.number;
        const name = document.createElement('span'); name.className = 'truncate'; name.textContent = ch.name;
        const badge = document.createElement('span'); badge.className = 'ml-2 rounded-full bg-white/10 px-2 py-0.5 text-[10px] font-semibold tracking-wide'; badge.textContent = ch.quality;
        titleRow.append(num, name, badge);

        const cat = document.createElement('div'); cat.className = 'text-[11px] text-white/55'; cat.textContent = ch.category;
        textWrap.append(titleRow, cat);

        btn.append(logoWrap, textWrap);
        if (ch.live) {
          const live = document.createElement('span');
          live.className = 'ml-auto rounded-sm bg-red-500/90 px-1.5 py-0.5 text-[10px] font-semibold text-white';
          live.textContent = 'AO VIVO';
          btn.appendChild(live);
        }

        btn.addEventListener('click', () => selectChannel(idx));
        listEl.appendChild(btn);
      });
    }

    // ====== Sele√ß√£o e Player (usa lista filtrada) ======
    const player = document.getElementById('player');
    const infoTitle = document.getElementById('infoTitle');
    const infoSubtitle = document.getElementById('infoSubtitle');

    function selectChannel(idx) {
      const visible = getVisibleChannels();
      if (!visible.length) return;
      selectedIndex = Math.max(0, Math.min(idx, visible.length - 1));
      const ch = visible[selectedIndex];
      player.src = ch.streamUrl;
      infoTitle.textContent = ch.name;
      infoSubtitle.textContent = ch.category;
      renderList();
    }

    // ====== Navega√ß√£o por teclado ======
    window.addEventListener('keydown', (e) => {
      const visible = getVisibleChannels();
      if (!visible.length) return;
      if (e.key === 'ArrowDown') { e.preventDefault(); selectChannel(selectedIndex + 1); }
      if (e.key === 'ArrowUp')   { e.preventDefault(); selectChannel(selectedIndex - 1); }
      if (e.key === 'Enter')     { e.preventDefault(); }
    });

    // ====== Fullscreen & InfoBar visibility ======
    const infoBar = document.getElementById('infoBar');
    function updateInfoBarVisibility() {
      const isFS = !!document.fullscreenElement;
      if (isFS) infoBar.classList.add('hidden');
      else infoBar.classList.remove('hidden');
    }
    document.getElementById('btnFullscreen').addEventListener('click', async () => {
      const el = document.getElementById('playerContainer');
      if (document.fullscreenElement) {
        await document.exitFullscreen();
      } else {
        infoBar.classList.add('hidden');
        await el.requestFullscreen?.();
      }
    });
    document.addEventListener('fullscreenchange', updateInfoBarVisibility);

    // ====== Rel√≥gio ======
    function updateClock() {
      const el = document.getElementById('clock');
      const now = new Date();
      el.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
    }
    updateClock();
    setInterval(updateClock, 1000);

    // ====== Abas (topo) ‚Äì j√° com novos nomes/ordem ======
    function initTabs() {
      const nav = document.querySelector('header nav');
      if (!nav) return;

      // Refor√ßa dataset.tab e liga os cliques
      const btns = Array.from(nav.querySelectorAll('button'));
      btns.forEach(btn => {
        const label = (btn.textContent || '').trim();
        btn.dataset.tab = label.toUpperCase();

        // estilo da aba ativa √© aplicado dinamicamente
        btn.addEventListener('click', (e) => {
          e.preventDefault?.();
          const key = (btn.dataset.tab || label).toUpperCase();
          const mapped = TAB_TO_CATEGORY[key] || 'ALL';

          const prev = getVisibleChannels()[selectedIndex];
          activeCategory = mapped;

          // recalcula selectedIndex preservando canal quando poss√≠vel
          const nowList = getVisibleChannels();
          const keepIdx = prev ? nowList.findIndex(c => c.id === prev.id) : -1;
          selectedIndex = keepIdx >= 0 ? keepIdx : 0;

          // atualiza UI das abas
          btns.forEach(b => {
            const isActive = b === btn;
            b.classList.toggle('text-white', isActive);
            b.classList.toggle('font-semibold', isActive);
            b.classList.toggle('text-white/60', !isActive);
          });

          renderList();
          selectChannel(selectedIndex);
        });
      });

      // Estado inicial: "Todos os canais"
      const initialBtn = btns[0];
      if (initialBtn) {
        initialBtn.click(); // garante filtro e estilo ativos
      }
    }

    // ====== Self-tests (rudimentares) ======
    function runSelfTests() {
      const required = ['player', 'channelList', 'infoBar', 'infoTitle', 'infoSubtitle'];
      const missing = required.filter(id => !document.getElementById(id));
      if (missing.length) console.warn('[SelfTest] Elementos ausentes:', missing);
    }

    // ====== Inicializa√ß√£o ======
    function init() {
      try { initTabs(); } catch (e) { console.error('Tabs init error:', e); }
      try { renderList(); } catch (e) { console.error('Render list error:', e); }
      runSelfTests();
    }
    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init);
    else init();
  </script>
</body>
</html>

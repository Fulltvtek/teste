<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fulltv â€¢ Canais ao Vivo</title>
  <!-- Favicon SVG inline -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%236d1418'/%3E%3Crect x='14' y='14' width='36' height='10' fill='%23ffffff'/%3E%3Crect x='14' y='27' width='20' height='10' fill='%23ffffff'/%3E%3Crect x='14' y='14' width='10' height='36' fill='%23ffffff'/%3E%3C/svg%3E" />
  <meta name="theme-color" content="#6d1418" />
  <!-- Tailwind CDN (sem build) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Fundo com textura/gradiente para lembrar UI de TV */
    body { 
      background: radial-gradient(80% 120% at 50% 0%, #7c1a1f 0%, #4b0d10 60%, #250608 100%);
    }
    /* Scrollbar sutil no menu */
    .thin-scroll::-webkit-scrollbar { width: 8px; }
    .thin-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,.15); border-radius: 8px; }
  </style>
</head>
<body class="min-h-screen text-white">
  <!-- Topbar -->
  <header class="flex h-16 items-center justify-between border-b border-white/10 bg-gradient-to-r from-[#4b0d10] via-[#6d1418] to-[#4b0d10] px-4">
    <div class="flex items-center gap-3">
      <div class="flex h-8 w-8 items-center justify-center rounded-md bg-white text-[#6d1418] font-black">F</div>
      <span class="text-white/90 font-semibold">Fulltv</span>
    </div>
    <nav class="hidden md:flex items-center gap-6 text-sm">
      <button class="uppercase tracking-wide text-white font-semibold">TV</button>
      <button class="uppercase tracking-wide text-white/60 hover:text-white/90">DESTAQUES</button>
      <button class="uppercase tracking-wide text-white/60 hover:text-white/90">FILMES</button>
      <button class="uppercase tracking-wide text-white/60 hover:text-white/90">SÃ‰RIES</button>
      <button class="uppercase tracking-wide text-white/60 hover:text-white/90">
        <span class="[text-shadow:0_1px_0_rgba(0,0,0,0.2)]"><span class="text-pink-300">K</span><span class="text-yellow-300">I</span><span class="text-green-300">D</span><span class="text-sky-300">S</span></span>
      </button>
      <button class="uppercase tracking-wide text-white/60 hover:text-white/90">EXPLORAR</button>
    </nav>
    <div class="flex items-center gap-4 text-white/80">
      <button title="Pesquisar" class="hover:text-white">ðŸ”Ž</button>
      <button title="NotificaÃ§Ãµes" class="hover:text-white">ðŸ””</button>
      <button title="Perfil" class="hover:text-white">ðŸ‘¤</button>
      <div id="clock" class="ml-2 text-white/90 tabular-nums">--:--</div>
    </div>
  </header>

  <!-- GRID -->
  <main class="mx-auto grid max-w-7xl grid-cols-1 gap-4 p-4 md:grid-cols-[320px_1fr]">
    <!-- Sidebar canais -->
    <aside class="flex w-[320px] shrink-0 flex-col gap-2 p-1">
      <div class="mb-1 text-xs uppercase tracking-wide text-white/60">Lista de Canais</div>
      <div id="channelList" class="thin-scroll flex max-h-[60vh] flex-col gap-2 overflow-auto pr-1"></div>
      <div class="mt-3 rounded-lg border border-white/10 p-3 text-[11px] text-white/60">
        Pressione <span class="rounded bg-white/10 px-1">â†‘/â†“</span> para navegar e <span class="rounded bg-white/10 px-1">Enter</span> para assistir
      </div>
    </aside>

    <!-- Player -->
    <section id="playerContainer" class="relative aspect-video w-full overflow-hidden rounded-2xl border border-white/10 bg-black shadow-2xl">
      <iframe id="player" src="about:blank" title="Canal atual" class="absolute inset-0 h-full w-full border-0" allowfullscreen referrerpolicy="no-referrer"></iframe>
      <!-- LIVE -->
      <div class="pointer-events-none absolute left-4 top-4 flex items-center gap-2 rounded-full bg-red-600/90 px-2.5 py-1 text-xs font-bold text-white shadow">
        <span class="inline-block h-2 w-2 animate-pulse rounded-full bg-white"></span> AO VIVO
      </div>
      <!-- AÃ§Ãµes -->
      <div class="absolute right-4 top-4 flex items-center gap-2 z-10">
        <button id="btnFullscreen" class="rounded-full bg-black/40 px-2 py-1 text-white/90 backdrop-blur hover:bg-black/60" title="Tela cheia">â¤¢</button>
      </div>
      <!-- Barra de informaÃ§Ãµes -->
      <div id="infoBar" class="pointer-events-none absolute inset-x-0 bottom-0 flex items-end p-4">
        <div class="w-full rounded-2xl bg-gradient-to-r from-black/80 via-black/60 to-transparent p-4 text-white shadow-2xl">
          <div class="text-sm uppercase tracking-wide text-white/70">Canal</div>
          <div class="flex items-baseline justify-between">
            <h3 id="infoTitle" class="truncate text-2xl font-bold md:text-3xl">â€”</h3>
            <div id="infoSubtitle" class="hidden pl-4 text-right text-sm text-white/70 md:block">â€”</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="mx-auto max-w-7xl px-4 pb-6 text-center text-xs text-white/60">Todos os direitos reservados ao Fulltv Â© 2025</footer>

  <!-- App JS (vanilla) -->
  <script>
    // ====== Lista de Canais ======
    // Para adicionar mais canais, basta copiar o objeto e alterar os campos.
    const CHANNELS = [
      {
        id: 1,
        number: 1,
        name: "Globo SP",
        category: "Abertos",
        quality: "HD",
        logoUrl: "https://reidoscanais.life/img/tvglobo.png",
        live: true,
        streamUrl: "https://reidoscanais.life/embed/?id=globosp-globosaopaulo"
      }
     {
        id: 2,
        number: 2,
        name: "Globo RJ",
        category: "Abertos",
        quality: "HD",
        logoUrl: "https://reidoscanais.life/img/tvglobo.png",
        live: true,
        streamUrl: "https://reidoscanais.life/embed/?id=globorj-globorio"
      }
    {
        id: 3,
        number: 3,
        name: "SBT",
        category: "Abertos",
        quality: "HD",
        logoUrl: "https://reidoscanais.life/img/sbt.png",
        live: true,
        streamUrl: "https://reidoscanais.life/embed/?id=sbt"
      }
    ];

    // ====== Estado simples ======
    let selectedIndex = 0;

    // ====== Render da Sidebar ======
    function renderList() {
      const listEl = document.getElementById('channelList');
      if (!listEl) return;
      listEl.innerHTML = '';
      CHANNELS.forEach((ch, idx) => {
        const btn = document.createElement('button');
        btn.className = `group relative flex w-full items-center gap-3 rounded-xl border border-white/5 px-3 py-2 text-left transition-all ${idx === selectedIndex ? 'bg-white/10 ring-2 ring-rose-400/50' : 'hover:bg-white/5'}`;

        const logoWrap = document.createElement('div');
        logoWrap.className = 'flex h-8 w-8 items-center justify-center rounded-md bg-black/30 text-lg overflow-hidden';
        const img = document.createElement('img');
        img.src = ch.logoUrl; img.alt = ch.name; img.className = 'h-6 w-6 object-contain';
        logoWrap.appendChild(img);

        const textWrap = document.createElement('div');
        textWrap.className = 'flex min-w-0 flex-col';

        const titleRow = document.createElement('div');
        titleRow.className = 'flex items-center text-[13px] text-white/90';
        const num = document.createElement('span'); num.className = 'mr-2 text-white/70 w-6'; num.textContent = ch.number;
        const name = document.createElement('span'); name.className = 'truncate'; name.textContent = ch.name;
        const badge = document.createElement('span'); badge.className = 'ml-2 rounded-full bg-white/10 px-2 py-0.5 text-[10px] font-semibold tracking-wide'; badge.textContent = ch.quality;
        titleRow.append(num, name, badge);

        const cat = document.createElement('div'); cat.className = 'text-[11px] text-white/55'; cat.textContent = ch.category;
        textWrap.append(titleRow, cat);

        btn.append(logoWrap, textWrap);
        if (ch.live) {
          const live = document.createElement('span');
          live.className = 'ml-auto rounded-sm bg-red-500/90 px-1.5 py-0.5 text-[10px] font-semibold text-white';
          live.textContent = 'AO VIVO';
          btn.appendChild(live);
        }

        btn.addEventListener('click', () => selectChannel(idx));
        listEl.appendChild(btn);
      });
    }

    // ====== SeleÃ§Ã£o e Player ======
    const player = document.getElementById('player');
    const infoTitle = document.getElementById('infoTitle');
    const infoSubtitle = document.getElementById('infoSubtitle');

    function selectChannel(idx) {
      selectedIndex = Math.max(0, Math.min(idx, CHANNELS.length - 1));
      const ch = CHANNELS[selectedIndex];
      // Atualiza iframe
      player.src = ch.streamUrl;
      // Atualiza barra de info
      infoTitle.textContent = ch.name;
      infoSubtitle.textContent = ch.category;
      // Re-render lista para atualizar destaque
      renderList();
    }

    // ====== NavegaÃ§Ã£o por teclado ======
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowDown') { e.preventDefault(); selectChannel(selectedIndex + 1); }
      if (e.key === 'ArrowUp')   { e.preventDefault(); selectChannel(selectedIndex - 1); }
      if (e.key === 'Enter')     { e.preventDefault(); /* mantÃ©m o canal atual */ }
    });

    // ====== Fullscreen & InfoBar visibility ======
    const infoBar = document.getElementById('infoBar');

    function updateInfoBarVisibility() {
      const isFS = !!document.fullscreenElement;
      if (isFS) {
        infoBar.classList.add('hidden');
      } else {
        infoBar.classList.remove('hidden');
      }
    }

    document.getElementById('btnFullscreen').addEventListener('click', async () => {
      const el = document.getElementById('playerContainer');
      if (document.fullscreenElement) {
        await document.exitFullscreen();
      } else {
        infoBar.classList.add('hidden'); // oculta imediatamente ao entrar em tela cheia
        await el.requestFullscreen?.();
      }
    });

    document.addEventListener('fullscreenchange', updateInfoBarVisibility);

    // ====== RelÃ³gio ======
    function updateClock() {
      const el = document.getElementById('clock');
      const now = new Date();
      el.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
    }
    updateClock();
    setInterval(updateClock, 1000);

    // ====== Self-tests (rudimentares) ======
    function runSelfTests() {
      const required = ['player', 'channelList', 'infoBar', 'infoTitle', 'infoSubtitle'];
      const missing = required.filter(id => !document.getElementById(id));
      if (missing.length) {
        console.warn('[SelfTest] Elementos ausentes:', missing);
      }
      if (CHANNELS.length) {
        const first = CHANNELS[0];
        // Teste: selecionar e verificar se atualizou info + iframe
        selectChannel(0);
        setTimeout(() => {
          const ok = player.src.includes(first.streamUrl);
          console.log('[SelfTest] Player src atualizado:', ok);
        }, 0);
      }
    }

    // ====== InicializaÃ§Ã£o ======
    function init() {
      try { renderList(); } catch (e) { console.error('Render list error:', e); }
      if (CHANNELS && CHANNELS.length) {
        selectChannel(0);
      } else {
        const listEl = document.getElementById('channelList');
        if (listEl) {
          const empty = document.createElement('div');
          empty.className = 'text-sm text-white/60';
          empty.textContent = 'Nenhum canal disponÃ­vel.';
          listEl.appendChild(empty);
        }
      }
      runSelfTests();
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</body>
</html>
